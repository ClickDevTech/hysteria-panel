<!DOCTYPE html>
<html lang="<%= typeof lang !== 'undefined' ? lang : 'en' %>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= typeof t !== 'undefined' ? t('setup.title') : 'Initial Setup' %> | CÂ³ CELERITY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="login-page">
    <div class="login-container">
        <div class="login-box">
            <div class="login-header">
                <span class="logo-icon large">âš¡</span>
                <h1>CÂ³ CELERITY</h1>
                <p style="background: linear-gradient(135deg, var(--accent) 0%, #a855f7 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">by Click Connect</p>
                <p style="margin-top: 12px; color: var(--text-secondary);"><%= typeof t !== 'undefined' ? t('setup.header') : 'Initial Setup' %></p>
            </div>
            
            <div class="alert alert-info" style="margin-bottom: 1rem;">
                <%= typeof t !== 'undefined' ? t('setup.createAdmin') : 'ðŸ” Create administrator account.' %><br>
                <%= typeof t !== 'undefined' ? t('setup.credentialsEncrypted') : 'Login and password will be stored encrypted.' %>
            </div>
            
            <% if (error) { %>
            <div class="alert alert-error"><%= error %></div>
            <% } %>
            
            <form method="POST" action="/panel/setup" class="login-form">
                <div class="form-group">
                    <label for="username"><%= typeof t !== 'undefined' ? t('setup.adminLogin') : 'Administrator Login' %></label>
                    <input type="text" id="username" name="username" 
                           placeholder="<%= typeof t !== 'undefined' ? t('setup.minChars3') : 'Minimum 3 characters' %>" 
                           minlength="3" required autofocus>
                </div>
                <div class="form-group">
                    <label for="password"><%= typeof t !== 'undefined' ? t('setup.password') : 'Password' %></label>
                    <input type="password" id="password" name="password" 
                           placeholder="<%= typeof t !== 'undefined' ? t('setup.minChars6') : 'Minimum 6 characters' %>" 
                           minlength="6" required>
                </div>
                <div class="form-group">
                    <label for="passwordConfirm"><%= typeof t !== 'undefined' ? t('setup.confirmPassword') : 'Confirm Password' %></label>
                    <input type="password" id="passwordConfirm" name="passwordConfirm" 
                           placeholder="<%= typeof t !== 'undefined' ? t('setup.repeatPassword') : 'Repeat password' %>" 
                           minlength="6" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block"><%= typeof t !== 'undefined' ? t('setup.createAccount') : 'Create Account' %></button>
            </form>
            
            <div class="login-footer">
                <small><%= typeof t !== 'undefined' ? t('setup.rememberWarning') : 'âš ï¸ Remember credentials â€” recovery is impossible!' %></small>
            </div>
        </div>
    </div>
    
    <script>
    const passwordsMismatch = '<%= typeof t !== "undefined" ? t("setup.passwordsMismatch") : "Passwords don\'t match!" %>';
    
    document.querySelector('form').addEventListener('submit', function(e) {
        const pass = document.getElementById('password').value;
        const confirm = document.getElementById('passwordConfirm').value;
        if (pass !== confirm) {
            e.preventDefault();
            alert(passwordsMismatch);
        }
    });
    </script>
</body>
</html>
