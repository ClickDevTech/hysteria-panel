<div class="page-header">
    <a href="/panel/users" class="btn btn-back"><%= t('common.backToList') %></a>
</div>

<div class="card">
    <div class="card-header">
        <h2><%= t('users.newUser') %></h2>
    </div>
    <div class="card-body">
        <form method="POST" action="/panel/users" class="form">
            <div class="form-row">
                <div class="form-group">
                    <label for="userId"><%= t('users.userId') %></label>
                    <input type="text" id="userId" name="userId" placeholder="<%= t('users.userIdPlaceholder') %>" required>
                    <small><%= t('users.userIdHint') %></small>
                </div>
                
                <div class="form-group">
                    <label for="username"><%= t('users.username') %></label>
                    <input type="text" id="username" name="username" placeholder="<%= t('users.usernamePlaceholder') %>">
                    <small><%= t('users.usernameHint') %></small>
                </div>
            </div>
            
                <div class="form-group">
                <label><%= t('users.groups') %></label>
                <div class="groups-select">
                    <% if (groups && groups.length > 0) { %>
                        <% groups.forEach(group => { %>
                            <label class="checkbox-tag" style="border-color: <%= group.color %>">
                                <input type="checkbox" name="groups" value="<%= group._id %>">
                                <span class="tag-dot" style="background: <%= group.color %>"></span>
                                <span><%= group.name %></span>
                            </label>
                        <% }); %>
                    <% } else { %>
                        <p class="hint"><%= t('nodes.noGroups') %> <a href="/panel/groups"><%= t('nodes.createGroup') %></a></p>
                    <% } %>
                </div>
                <small><%= t('users.groupsHint') %></small>
                </div>
                
            <div class="form-row">
                <div class="form-group">
                    <label for="trafficLimit"><%= t('users.trafficLimit') %></label>
                    <input type="number" id="trafficLimit" name="trafficLimitGB" placeholder="0" value="0" min="0">
                    <small><%= t('users.trafficLimitHint') %></small>
            </div>
            
                    <div class="form-group">
                    <label for="maxDevices"><%= t('users.maxDevices') %></label>
                    <input type="number" id="maxDevices" name="maxDevices" placeholder="0" value="0" min="-1">
                    <small><%= t('users.maxDevicesHint') %></small>
                </div>
            </div>
            
            <div class="form-group">
                <label for="expireDays"><%= t('users.expireDays') %></label>
                <input type="number" id="expireDays" name="expireDays" placeholder="30" value="30" min="0">
                <small><%= t('users.expireDaysHint') %></small>
            </div>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="enabled" checked>
                    <%= t('users.activateNow') %>
                </label>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary"><%= t('users.createUser') %></button>
                <a href="/panel/users" class="btn"><%= t('common.cancel') %></a>
            </div>
        </form>
    </div>
</div>
